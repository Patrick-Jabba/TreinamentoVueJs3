"use strict";(self["webpackChunkdashboard"]=self["webpackChunkdashboard"]||[]).push([[614],{3614:function(e,a,s){s.r(a),s.d(a,{default:function(){return q}});var r=s(3396),t=s(9242),o=s(7139);const l={class:"flex justify-between",id:"modal-create-account"},n=(0,r._)("h1",{class:"text-4xl font-black text-gray-800"},"Crie uma conta",-1),d={class:"mt-16"},i={class:"block"},u=(0,r._)("span",{class:"text-lg font-medium text-gray-800"},"Nome",-1),c={key:0,class:"block font-medium text-brand-danger"},m={class:"block mt-9"},g=(0,r._)("span",{class:"text-lg font-medium text-gray-800"},"E-mail",-1),p={key:0,class:"block font-medium text-brand-danger"},b={class:"block mt-9"},w=(0,r._)("span",{class:"text-lg font-medium text-gray-800"},"Senha",-1),y={key:0,class:"block font-medium text-brand-danger"},f=["disabled"],k={key:1};function x(e,a,s,x,v,h){const _=(0,r.up)("Icon");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",l,[n,(0,r._)("button",{onClick:a[0]||(a[0]=(...e)=>x.close&&x.close(...e)),class:"text-4xl text-gray-600 focus:outline-none"}," Ã— ")]),(0,r._)("div",d,[(0,r._)("form",{onSubmit:a[4]||(a[4]=(0,t.iM)(((...e)=>x.handleSubmit&&x.handleSubmit(...e)),["prevent"]))},[(0,r._)("label",i,[u,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>x.state.name.value=e),type:"name",class:(0,o.C_)([{"border-brand-danger":!!x.state.name.errorMessage},"block w-full px-4 py-3 mt-1 text-lg bg-gray-100 border-2 border-transparent rounded"]),placeholder:"Digite seu nome completo"},null,2),[[t.nr,x.state.name.value]]),x.state.name.errorMessage?((0,r.wg)(),(0,r.iD)("span",c,(0,o.zw)(x.state.name.errorMessage),1)):(0,r.kq)("",!0)]),(0,r._)("label",m,[g,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>x.state.email.value=e),type:"email",class:(0,o.C_)([{"border-brand-danger":!!x.state.email.errorMessage},"block w-full px-4 py-3 mt-1 text-lg bg-gray-100 border-2 border-transparent rounded"]),placeholder:"email@email.com"},null,2),[[t.nr,x.state.email.value]]),x.state.email.errorMessage?((0,r.wg)(),(0,r.iD)("span",p,(0,o.zw)(x.state.email.errorMessage),1)):(0,r.kq)("",!0)]),(0,r._)("label",b,[w,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>x.state.password.value=e),type:"password",class:(0,o.C_)([{"border-brand-danger":!!x.state.password.errorMessage},"block w-full px-4 py-3 mt-1 text-lg bg-gray-100 border-2 border-transparent rounded"]),placeholder:"minhasenhasecreta"},null,2),[[t.nr,x.state.password.value]]),x.state.password.errorMessage?((0,r.wg)(),(0,r.iD)("span",y,(0,o.zw)(x.state.password.errorMessage),1)):(0,r.kq)("",!0)]),(0,r._)("button",{disabled:x.state.isLoading,type:"submit",class:(0,o.C_)([{"opacity-50":x.state.isLoading},"px-8 py-3 mt-10 text-2xl font-bold text-white rounded-full bg-brand-main focus:outline-none transition-all duration-150"])},[x.state.isLoading?((0,r.wg)(),(0,r.j4)(_,{key:0,class:"animate-spin",name:"loading"})):((0,r.wg)(),(0,r.iD)("span",k,"ENTRAR"))],10,f)],32)])],64)}s(7658);var v=s(4870),h=s(2483),_=s(5708),M=s(4677),C=s(2200),L=s(2726),D=s(6654),S=s(5157),U={components:{Icon:D.Z},setup(){const e=(0,M.pm)(),a=(0,h.tv)(),s=(0,C.Z)(),{value:r,errorMessage:t}=(0,_.U$)("name",S.V),{value:o,errorMessage:l}=(0,_.U$)("email",S.p),{value:n,errorMessage:d}=(0,_.U$)("password",S.V),i=(0,v.qj)({hasErrors:!1,isLoading:!1,name:{value:r,errorMessage:t},email:{value:o,errorMessage:l},password:{value:n,errorMessage:d}});async function u({email:e,password:r}){const{data:t,errors:o}=await L.Z.auth.login({email:e,password:r});o||(localStorage.setItem("token",t.token),a.push({name:"Feedbacks"}),s.close()),i.isLoading=!1}async function c(){try{e.clear(),i.isLoading=!0;const{errors:a}=await L.Z.auth.register({name:i.name.value,email:i.email.value,password:i.password.value});if(!a)return void await u({email:i.email.value,password:i.password.value});400===a.status&&e.error("Ocorreu um erro ao criar conta."),i.isLoading=!1}catch(a){i.isLoading=!1,i.hasErrors=!!a,e.error("Ocorreu um erro ao efetuar login.")}}return{state:i,close:s.close,handleSubmit:c,login:u}}},V=s(89);const Z=(0,V.Z)(U,[["render",x]]);var q=Z}}]);
//# sourceMappingURL=614.f06e844d.js.map